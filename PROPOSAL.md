# Telegram Personal Assistant Bot
## Project Proposal - LLM-Powered Personal Management System

---

## 專案資訊

**專案名稱**: Telegram Personal Assistant Bot (LLM-Powered)

---

## 一、簡介與動機

### 1.1 專案目標

開發一個基於 Telegram 的智能個人助理機器人，透過 **LLM (Large Language Model)** 驅動的自然語言理解，提供無縫的生活管理體驗。

**核心理念**

傳統的個人管理工具需要用戶學習複雜的指令或操作介面。本專案利用 **LLM 的強大語言理解能力**，讓用戶以最自然的方式與助理對話，就像與真人助理交流一樣。

### 1.2 問題背景與動機

#### 現有解決方案的局限性

**記帳應用程式**
- 需要手動選擇類別
- 介面複雜，記錄流程繁瑣
- 類別固定，無法適應個人習慣
- 需要多次點擊才能完成一筆記錄

**待辦事項應用程式**
- 需要填寫表單
- 日期時間選擇器操作麻煩
- 無法理解自然語言表達如「明天」「下週五前」
- 優先級需手動設定

**提醒應用程式**
- 設定重複提醒的介面複雜
- 無法處理複雜的時間表達
- 多個時間點需分別設定

**筆記應用程式**
- 需要在多個 App 之間切換
- 分類整理耗時
- 搜尋功能受限於關鍵字匹配

#### 使用者痛點

引用真實場景：

> "我只是想快速記錄「午餐 150」，為什麼要：打開 App → 選擇類別 → 輸入金額 → 選擇日期 → 確認？"

> "筆記、備忘錄沒時間整理，需要的時候花了很多時間在不同層級的目錄中尋找"

### 1.3 創新特色

#### 1. 零學習成本
- 不需要記憶任何指令
- 像跟人說話一樣自然
- 適合所有年齡層使用

#### 2. LLM 驅動的智能分類
- 自動學習用戶的分類習慣
- 動態調整，不寫死規則
- 隨著使用越來越精準

#### 3. 跨功能整合
- 在同一個對話介面完成所有操作
- 無需在多個 App 之間切換
- 資料互通（如：待辦可轉為行事曆事件）

---

## 二、相關文獻

### 2.1 意圖識別的技術發展與 LLM 的應用

意圖識別（Intent Recognition）是對話系統的核心任務。傳統方法依賴規則式系統或需要大量標註資料訓練的分類模型，開發成本高且難以適應多變的用戶表達方式。近年來，大型語言模型（LLMs）的出現為這個問題帶來了新的解決方案。

### 2.2 使用意圖描述進行零樣本意圖分類的有效性

Parikh et al. (2023) 在針對對話式 NLU 系統的研究中，系統性地比較了四種零樣本和少樣本意圖分類技術。研究的關鍵發現是：**僅透過在 prompt 中提供意圖描述（intent descriptions），LLM 就能準確識別用戶意圖，無需額外的模型訓練或微調**。

該研究在包含 60 個意圖的 MASSIVE 數據集上，使用 Flan-T5-XXL 和 GPT-3 達到了 73% 以上的準確率；在意圖數量較少的場景（9-13 個意圖），準確率更是高達 86-89%（Parikh et al., 2023, Table 5）。研究使用的 prompt 格式簡潔直接：

```
The given sentence needs to be mapped to exactly one of the intents described below:
alarm_set: user wants to set an alarm
...
Sentence: wake me up at 7am
Intent: alarm_set
```

**這種方法的關鍵在於為每個意圖提供清晰的描述，讓模型理解意圖的語義範圍**。研究證實，這種零樣本提示方法的效果甚至優於使用少量標註資料訓練的傳統分類器（Parikh et al., 2023, Section 4.3）。

### 2.3 實際部署中的考量與最佳實踐

Arora et al. (2024) 在針對任務導向對話系統的研究中，評估了多個最新的 LLMs（包括 Claude 和 Mistral 系列），並特別關注實際部署的挑戰。研究使用來自真實已部署系統的數據集，驗證了意圖描述方法在實務中的可行性。

該研究有兩個關鍵發現對本專案特別重要：

**1. 意圖設計原則**

通過控制實驗，研究發現 LLM 的意圖識別性能受兩個因素顯著影響：
- **意圖數量**：意圖數量越少，準確率越高
- **意圖範圍**：細粒度的意圖定義（每個意圖語義範圍較窄）比廣泛的意圖定義表現更好

研究建議：**採用細粒度的意圖定義，並保持較小的標籤空間**（Arora et al., 2024, Section 4.1）。

**2. 效能驗證**

在真實場景的測試中，Claude v3 Haiku 在多個數據集上平均 F1 分數達到 0.736，同時延遲僅為 1.697 秒（Arora et al., 2024, Table 1），證明了這種方法在實際應用中的可行性。

### 2.4 本專案的技術選擇與理論基礎

基於上述研究的實證結果，本專案採用 **LLM + 意圖描述** 的方法作為核心的意圖識別機制。具體做法是：**直接在系統 prompt 中列出各個意圖及其描述**，讓 LLM 根據用戶輸入判斷意圖並提取相關參數。

這個設計選擇有充分的理論支持：

1. **意圖數量適中**：本系統預計包含 10-15 個主要意圖（記帳、待辦、提醒、備忘錄、行事曆），符合 Parikh et al. (2023) 研究中表現最佳的範圍（9-31 個意圖可達 70-89% 準確率）

2. **意圖定義明確**：本系統的意圖語義範圍清晰且不重疊（如「記帳」vs「新增待辦」），符合 Arora et al. (2024) 建議的細粒度意圖設計原則

3. **低資源情境**：個人助理系統無法收集大量標註資料，零樣本方法的 training-free 特性完全符合需求

4. **開發與維護成本**：相較於訓練專用分類模型，直接使用 prompt + 意圖描述的方法開發成本極低，且新增功能只需更新 prompt 即可

根據 Parikh et al. (2023) 和 Arora et al. (2024) 的研究結果，在本專案的應用場景下（意圖數量少、語義明確、聚焦於個人生活管理），採用意圖描述的方法預期可以達到 80% 以上的準確率，足以支撐實際應用。

---

## 三、系統功能

### 3.1 為什麼需要 LLM？

傳統的規則式系統（Rule-based System）面臨的挑戰：

```
傳統方式:
用戶: "早餐 80"
系統: 無法理解 → 需要固定格式如 "/expense 80 food"

用戶: "昨天買了一本書大概 350 左右"
系統: 無法解析複雜語句 → 記錄失敗
```

**LLM 能夠解決的問題：**

1. **語義理解**
   - 理解模糊、口語化的表達
   - 處理多樣的時間表達方式
   - 提取關鍵資訊（金額、日期、類別）

2. **上下文感知**
   - 記住用戶習慣（常用類別、表達方式）
   - 理解代詞和省略（"也記一筆"、"一樣的"）
   - 處理多輪對話

3. **智能分類**
   - 自動判斷支出類別
   - 學習用戶的分類習慣
   - 動態適應，不寫死規則

4. **參數提取**
   - 從自然語言中精確提取結構化資料
   - 處理不完整資訊並合理補全
   - 識別意圖並路由到正確功能

### 3.2 LLM 在本專案中的應用場景

**場景 1：智能記帳**

```
用戶: "今天中午跟同事吃飯花了大概 200 多"

LLM 處理:
{
  "intent": "create_expense",
  "amount": 200,
  "category": "飲食",
  "subcategory": "午餐",
  "description": "跟同事吃飯",
  "date": "2025-10-30"
}

用戶: "Netflix 又扣款了 390"

LLM 處理:
{
  "intent": "create_expense",
  "amount": 390,
  "category": "訂閱",
  "subcategory": "串流影音",
  "description": "Netflix 月費"
}
```

**場景 2：時間理解**

```
用戶: "明天下午 3 點要開會"
LLM: 理解為 2025-10-31 15:00

用戶: "每週一早上 9 點"
LLM: 理解為重複事件，frequency=weekly, day=Monday, time=09:00

用戶: "30 分鐘後提醒我"
LLM: 計算絕對時間 = NOW() + 30 minutes
```

**場景 3：意圖識別**

```
用戶: "今天花了多少"
LLM: intent=query_transaction, period=today

用戶: "記住我的車位是 B3-25"
LLM: intent=create_memo, content="車位 B3-25"

用戶: "週五前要完成報告"
LLM: intent=create_todo, title="完成報告", due_date="2025-11-01"
```

### 3.3 系統架構圖

**後端技術棧**
- 語言：python 3.12+
- 資料庫：PostgreSQL 14+
- LLM SDK：anthropic-sdk-go

**系統架構**

```
┌─────────────┐
│  Telegram   │  用戶透過 Telegram 發送訊息
│   用戶端     │
└──────┬──────┘
       │
       ▼
┌─────────────────────────────────┐
│   Telegram Bot API Handler      │  接收訊息、發送回應、推送通知
└──────┬──────────────────────────┘
       │
       ▼
┌─────────────────────────────────┐
│    Message Router               │  訊息預處理、路由分發
└──────┬──────────────────────────┘
       │
       ▼
┌─────────────────────────────────┐
│  LLM Intent Recognition         │  *** LLM 核心層 ***
│  - 意圖識別                      │  - 呼叫 Claude API
│  - 參數提取                      │  - Prompt Engineering
│  - 類別判斷                      │  - 上下文管理
│  - 時間解析                      │
└──────┬──────────────────────────┘
       │
       ▼
┌─────────────────────────────────┐
│   Business Logic Layer          │  根據識別的意圖執行業務邏輯
│   - Memo Service                │
│   - Todo Service                │
│   - Event Service               │
│   - Accounting Service          │
│   - Reminder Service            │
└──────┬──────────────────────────┘
       │
       ▼
┌─────────────────────────────────┐
│   Database Layer (PostgreSQL)   │  資料持久化
│   - 用戶資料                     │
│   - 交易記錄                     │
│   - 類別學習記錄                 │
│   - 事件與提醒                   │
└─────────────────────────────────┘

┌─────────────────────────────────┐
│   Background Jobs Scheduler     │  定時任務
│   - 事件提醒                     │
│   - 預算警告                     │
│   - 逾期通知                     │
└─────────────────────────────────┘
```

### 3.4 核心功能模組

**1. 備忘錄系統**
- 快速記錄資訊
- 全文搜尋
- 標籤分類
- LLM 自動提取關鍵字和標籤

**2. 待辦事項管理**
- 自動識別截止日期
- 優先級判斷
- 逾期提醒
- 完成狀態追蹤

**3. 行事曆與事件**
- 支援單次和重複事件
- 服藥提醒（重複事件特例）
- 彈性的通知設定
- 行程查詢

**4. 智能記帳系統**（重點模組）
- **LLM 動態類別判斷**：不寫死類別，根據內容自動分類
- **類別合併機制**：避免類別碎片化
- 支出統計與分析
- 預算管理與警告
- 定期交易自動記錄

**5. 提醒系統**
- 一次性提醒
- 重複提醒
- 倒數計時提醒

### 3.5 預期影響

1. **提升效率**
   - 降低記帳門檻，提高記帳意願
   - 自然語言介面節省操作時間
   - 統一平台減少 App 切換

2. **習慣培養**
   - 簡單的互動方式有助於培養記帳習慣
   - 自動提醒協助任務管理
   - 數據統計幫助反思消費行為

---

## 四、資料庫 ERD 圖

（待補充：迷你世界需求、ER 圖的實體關係型態、使用屬性）

---

## 五、後續進度規劃表與組員分工表

（待補充：專案時程規劃與組員任務分配）

---

## 參考文獻

Arora, G., Jain, S., & Merugu, S. (2024). Intent Detection in the Age of LLMs. *arXiv preprint arXiv:2410.01627*. https://arxiv.org/abs/2410.01627

Parikh, S., Vohra, Q., Tumbade, P., & Tiwari, M. (2023). Exploring Zero and Few-shot Techniques for Intent Classification. *arXiv preprint arXiv:2305.07157*. https://arxiv.org/abs/2305.07157
